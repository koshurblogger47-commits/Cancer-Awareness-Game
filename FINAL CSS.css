/* =========================================
   FINAL CSS.css â€” Updated for Touch Support
   Pixel City, Pixel Human, Larger Coins/Hearts/Cones
========================================= */

:root{
  --bg:#0e0e0e;
  --panel: rgba(0,0,0,0.45);
  --accent:#FFD700;
  --popupText:#ff8888;
  --redDark:#B22222;
  --font:'Press Start 2P', cursive;
}

*{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
html,body{height:100%}

body{
  margin:0;
  overflow:hidden;
  height:100vh;
  background:var(--bg);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:var(--font);
}

/* -------- Screens -------- */
.screen{
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  display:none;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
.screen.active{display:flex;}

/* -------- Start Screen -------- */
.header-container{
  display:flex;
  align-items:center;
  gap:18px;
  margin-bottom:22px;
}

.title{
  font-size:2.8rem;
  color:var(--accent);
  margin:0;
  text-align:center;
}

.pixel-ribbon{
  width:34px; height:54px;
  background:var(--accent);
  clip-path: polygon(0 0,100% 0,100% 70%,50% 100%,0 70%);
  filter: drop-shadow(0 0 6px #ffeaa7);
}

.caption{
  color:#ddd;
  font-size:1rem;
  margin-bottom:28px;
  max-width:90%;
  text-align:center;
}

/* -------- Buttons -------- */
.game-button{
  background:#222;
  color:white;
  padding:18px 30px;
  border:3px solid #fff;
  border-radius:16px;
  cursor:pointer;
  letter-spacing:1px;
  font-family:var(--font);
  margin:10px;
}
.game-button:hover{
  background:#fff;
  color:#222;
}

/* -------- Game Screen -------- */
#game-container{
  width:100%; height:100%;
  position:relative;
  overflow:hidden;

  /* Pixel city */
  background-color:#141414;
  background-image:
    linear-gradient(#2e2e2e 2px, transparent 2px),
    linear-gradient(90deg,#2e2e2e 2px, transparent 2px),
    linear-gradient(#222 30%, #141414 30%),
    repeating-linear-gradient(90deg,#333,#333 24px,#2b2b2b 24px,#2b2b2b 48px);
  background-size:
    40px 40px,
    40px 40px,
    100% 40%,
    96px 96px;
}

/* Scoreboard */
#score-board{
  position:absolute;
  top:18px; left:18px;
  background:var(--panel);
  padding:12px 16px;
  color:white;
  font-size:.9rem;
  border-radius:12px;
}

/* Track (ground) */
#game-track{
  position:absolute;
  bottom:0; width:100%; height:170px;
  border-top:6px solid #444;
}

/* -------- Pixel Player -------- */
#player{
  width:56px;
  height:92px;
  position:absolute;
  bottom:5px;
  left:70px;
  image-rendering:pixelated;
}
#player::before{
  content:"";
  position:absolute;
  width:56px; height:92px;
  image-rendering:pixelated;
  
  background-image:
    linear-gradient(#ffdcb8,#ffdcb8), /* head */
    linear-gradient(#000,#000),       /* eyes */
    linear-gradient(#3a2b1f,#3a2b1f), /* hair */
    linear-gradient(#4e8cff,#4e8cff), /* shirt */
    linear-gradient(#133a6b,#133a6b), /* jacket */
    linear-gradient(#133a6b,#133a6b), /* arms */
    linear-gradient(#222,#222),       /* left leg */
    linear-gradient(#222,#222),       /* right leg */
    linear-gradient(#000,#000),       /* left shoe */
    linear-gradient(#000,#000);       /* right shoe */

  background-size:
    42px 30px,
    10px 4px,
    42px 10px,
    36px 32px,
    48px 36px,
    56px 12px,
    14px 28px,
    14px 28px,
    14px 8px,
    14px 8px;
  
  background-position:
    7px 0px,
    22px 14px,
    7px 6px,
    10px 36px,
    4px 32px,
    0px 64px,
    13px 60px,
    29px 60px,
    12px 86px,
    30px 86px;
}

#player.run{ animation:bob .45s steps(2) infinite; }
@keyframes bob{
  0%{ transform:translateY(0); }
  50%{ transform:translateY(-4px); }
  100%{ transform:translateY(0); }
}

/* -------- Game Elements -------- */
.game-element{ position:absolute; image-rendering:pixelated; }

/* Cones */
.traffic-cone{
  width:36px; height:52px;
  background:
    linear-gradient(#fff 0 24%,#ff7b00 24% 48%,#fff 48% 72%,#ff7b00 72% 100%);
  border-bottom:10px solid black;
  border-radius:6px;
  bottom:5px;
}

/* Coins */
.coin{
  width:44px; height:44px;
  background:#FFD700;
  border-radius:50%;
  box-shadow: inset 0 0 0 8px #ffefa1;
  bottom:95px;
}

/* Hearts */
.heart{
  width:40px; height:40px;
  background:#ff3b3b;
  transform:rotate(-45deg);
  bottom:85px;
  position:absolute;
}
.heart::before,.heart::after{
  content:"";
  width:40px; height:40px;
  background:#ff3b3b;
  border-radius:50%;
  position:absolute;
}
.heart::before{ top:-20px; left:0; }
.heart::after{ left:20px; top:0; }

/* -------- Popups -------- */
.popup-overlay{
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  display:none;
  justify-content:center;
  align-items:center;
  background:rgba(0,0,0,.75);
  z-index:999;
}

.popup-box{
  background:rgba(255,255,255,.15);
  border:2px solid var(--popupText);
  padding:30px;
  border-radius:16px;
  text-align:center;
  max-width:80%;
  color:var(--popupText);
}

.popup-instruction{
  margin-top:15px;
  color:#ff4444;
  font-size:.8rem;
}

/* -------- Game Over -------- */
#game-over-screen{
  background:var(--bg);
  text-align:center;
}

.game-over-title{
  font-size:3rem;
  color:var(--redDark);
  margin-bottom:20px;
}

.score-final{
  font-size:1.2rem;
  color:#fff;
}

/* -------- Citations -------- */
#citations-screen{
  background:#141414;
  color:#fff;
  padding:32px;
  overflow-y:auto;
}

.citation-header{
  text-align:center;
  font-size:1.4rem;
  color:#ff6666;
}

.citation-content p{
  margin-bottom:18px;
  line-height:1.6;
}

